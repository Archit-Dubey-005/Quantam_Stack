<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Export CSV</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
    body, * { margin:0; padding:0; box-sizing:border-box; font-family: 'Segoe UI', sans-serif; }
    body { background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d); padding:20px; min-height:100vh; }
    .container { max-width:600px; margin:0 auto; background: rgba(255,255,255,0.95); border-radius:15px; padding:20px; box-shadow:0 10px 30px rgba(0,0,0,0.2); text-align:center;}
    h1 { color:#1a2a6c; margin-bottom:20px; }
    button { background:#1a2a6c; color:white; border:none; padding:12px 20px; border-radius:10px; font-size:16px; cursor:pointer; transition:0.3s; }
    button:hover { background:#fdbb2d; color:#1a2a6c; transform:translateY(-2px); }
</style>
</head>
<body>
<div class="container">
    <h1>Export Prediction CSV</h1>
    <button id="downloadBtn"><i class="fas fa-file-csv"></i> Download CSV</button>
</div>

<script>
document.getElementById('downloadBtn').addEventListener('click', () => {
    const lastPrediction = JSON.parse(localStorage.getItem('lastPrediction'));
    if (!lastPrediction) return alert("No prediction data found. Please run PREDICT first.");
    const url = lastPrediction.downloadUrl;
    const link = document.createElement('a');
    link.href = url;
    link.download = url.split('/').pop();
    link.click();
});
</script>
</body>
</html>
